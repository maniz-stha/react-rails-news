(window.webpackJsonpjavascript=window.webpackJsonpjavascript||[]).push([[0],{46:function(e,t,a){e.exports=a(79)},51:function(e,t,a){},75:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),o=a.n(s),i=(a(51),a(13)),c=a(21),l=a(5),u=a(26),m=a.n(u),d=a(8),p=a.n(d),h=function(e){e?p.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete p.a.defaults.headers.common.Authorization},b="GET_ERRORS",f=function(){return function(e){localStorage.removeItem("jwtToken"),h(!1),e(v({}))}},v=function(e){return{type:"SET_CURRENT_USER",payload:e}},w=(a(75),a(19)),E=a(43),g=a(15),y=function(e){return null===e||void 0===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var N={isAuthenticated:!1,user:{}},j={},C=a(31);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var L={newsList:null,news:null},x=Object(w.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return O({},e,{isAuthenticated:!y(t.payload),user:t.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.payload;default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NEWS_LIST":var a=t.payload,n=a.map(function(e){return S({},e.news,{comments:e.comments,likes:e.likes,user:e.user})});return S({},e,{newsList:n});case"SET_NEWS":var r=t.payload,s=S({},r.news,{comments:r.comments,likes:r.likes,user:r.user});return S({},e,{news:s});case"ADD_NEWS":return S({},e,{newsList:[t.payload].concat(Object(C.a)(e.news.newsList))});case"DELETE_NEWS":return S({},e,{newsList:e.newsList.filter(function(e){return e.id!==t.payload})});case"SET_COMMENT":var o=[].concat(Object(C.a)(e.news.comments),[t.payload]),i=S({},e.news,{comments:o,likes:e.news.likes,user:e.news.user});return S({},e,{news:i});case"DELETE_COMMENT":var c=e.news.comments.filter(function(e){return e.id!==t.payload}),l=S({},e.news,{comments:c,likes:e.news.likes,user:e.news.user});return S({},e,{news:l});default:return e}}}),T=[E.a],D=Object(w.d)(w.a.apply(void 0,T));window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()&&(D=Object(w.d)(w.a.apply(void 0,T),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));var P=Object(w.e)(x,{},D),R=a(44),U=Object(l.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(R.a)(e,["component","auth"]);return r.a.createElement(c.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(c.a,{to:"/login"})}}))}),A=a(2),W=a(3),I=a(6),M=a(4),X=a(7),V=a(10),B=a.n(V),q=function(e){function t(){return Object(A.a)(this,t),Object(I.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"onLogoutClick",value:function(e){e.preventDefault(),this.props.logoutUser()}},{key:"render",value:function(){var e,t=this.props.auth.isAuthenticated,a=y(this.props.auth.user)?null:this.props.auth.user;return e=t?r.a.createElement("ul",{className:"navbar-nav mx-10"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/profile"},a.name)),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"#",className:"nav-link",onClick:this.onLogoutClick.bind(this)},"Logout"))):r.a.createElement("ul",{className:"navbar-nav mx-10"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/register"},"Register"))),r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light"},r.a.createElement(i.b,{className:"navbar-brand",to:"/"},"React Rails news"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("div",{className:"input-group mx-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search feeds","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",id:"button-addon2"},r.a.createElement("i",{className:"fas fa-search"})))),e))}}]),t}(n.Component);q.prototypes={logoutUser:B.a.func.isRequired,auth:B.a.object.isRequired};var z=Object(l.b)(function(e){return{auth:e.auth}},{logoutUser:f})(q);function F(){return r.a.createElement("footer",{className:"mt-5 p-4 text-center"},"Copyright \xa9 ",(new Date).getFullYear()," React Rails News")}var G=a(11),J=a(18),Y=a.n(J),$=function(e){var t=e.name,a=e.placeholder,n=e.value,s=e.label,o=e.error,i=e.info,c=e.type,l=e.id,u=e.onChange,m=e.disabled;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:l},s),r.a.createElement("input",{type:c,className:Y()("form-control form-control-lg",{"is-invalid":o}),placeholder:a,name:t,id:l,value:n,onChange:u,disabled:m}),i&&r.a.createElement("small",{className:"form-text text-muted"},i),o&&r.a.createElement("div",{className:"invalid-feedback"},o))};$.defaultProps={type:"text"};var H=$,K=function(e){function t(){var e;return Object(A.a)(this,t),(e=Object(I.a)(this,Object(M.a)(t).call(this))).state={identity:"",password:"",errors:{}},e.onChange=e.onChange.bind(Object(G.a)(e)),e.onSubmit=e.onSubmit.bind(Object(G.a)(e)),e}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/feeds")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/feeds"),e.errors&&this.setState({errors:e.errors})}},{key:"onChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={identity:this.state.identity,password:this.state.password};this.props.loginUser(t)}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"login row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h2",{className:"text-center"},"Log In"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(H,{type:"text",placeholder:"Enter email or username",label:"Email Address / Username",name:"identity",id:"identity",info:"Use your email address or username to login",value:this.state.identity,onChange:this.onChange,error:e.identity}),r.a.createElement(H,{type:"password",placeholder:"Password",name:"password",id:"password",label:"Password",value:this.state.password,onChange:this.onChange,error:e.password}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))))}}]),t}(n.Component),Q=Object(l.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){p.a.post("/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),h(a);var n=m()(a);t(v(n))}).catch(function(e){t({type:b,payload:e.response.data})})}}})(K),Z=function(e){function t(){var e;return Object(A.a)(this,t),(e=Object(I.a)(this,Object(M.a)(t).call(this))).state={username:"",name:"",email:"",password:"",password_confirmation:"",errors:{}},e.onChange=e.onChange.bind(Object(G.a)(e)),e.onSubmit=e.onSubmit.bind(Object(G.a)(e)),e}return Object(X.a)(t,e),Object(W.a)(t,[{key:"onChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,name:this.state.name,email:this.state.email,password:this.state.password,password_confirmation:this.state.password_confirmation};this.props.registerUser(t,this.props.history)}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"register row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h2",{className:"text-center"},"Register"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(H,{type:"text",id:"username",placeholder:"Enter Username",name:"username",value:this.state.username,onChange:this.onChange,error:e.username,label:"Username"}),r.a.createElement(H,{type:"text",id:"name",placeholder:"Enter Name",name:"name",value:this.state.name,onChange:this.onChange,error:e.name,label:"Name"}),r.a.createElement(H,{type:"text",id:"email",placeholder:"Enter Email",name:"email",value:this.state.email,onChange:this.onChange,error:e.email,label:"Email"}),r.a.createElement(H,{type:"password",id:"password",placeholder:"Enter Password",name:"password",value:this.state.password,onChange:this.onChange,error:e.password,label:"Password"}),r.a.createElement(H,{type:"password",id:"password_confirmation",placeholder:"Confirm Password",name:"password_confirmation",value:this.state.password_confirmation,onChange:this.onChange,error:e.password_confirmation,label:"Confirm Password"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg"},"Submit"))))}}]),t}(n.Component),ee=Object(l.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){p.a.post("/api/users/register",e).then(function(e){return t.push("/login")}).catch(function(e){a({type:b,payload:e.response.data})})}}})(Object(c.g)(Z)),te=function(){return function(e){p.a.get("/api/news/").then(function(t){var a=t.data;e({type:"SET_NEWS_LIST",payload:a.data})}).catch(function(t){e({type:"SET_NEWS_LIST",payload:{}})})}},ae=function(e){return function(t){p.a.get("/api/news/".concat(e)).then(function(e){var a=e.data;t({type:"SET_NEWS",payload:a.data})}).catch(function(e){t({type:b,payload:e.response.data})})}},ne=a(22),re=a.n(ne),se=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"list";return function(n){var r={news_id:e,user_id:t};p.a.post("/api/news/".concat(e,"/likes"),r).then(function(t){n("list"==a?te():ae(e))}).catch(function(e){return n({type:b,payload:e.response.data})})}},oe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"list";return function(n){p.a.delete("/api/news/".concat(e,"/likes/").concat(t)).then(function(t){n("list"==a?te():ae(e))}).catch(function(e){return n({type:b,payload:e.response.data})})}},ie=function(e){function t(){return Object(A.a)(this,t),Object(I.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"onLikeClick",value:function(e,t,a,n){a?this.props.removeLike(e,n):this.props.addLike(e,t)}},{key:"findUserLike",value:function(e){var t=this.props.auth;return!!Object.values(e).includes(t.user.id)}},{key:"onDeleteClick",value:function(e){window.confirm("Are you sure you want to delete the news item")&&this.props.deleteNews(e)}},{key:"render",value:function(){var e=this.props,t=e.news,a=e.auth,n=this.findUserLike(t.likes),s=0;return n&&(s=Object.keys(t.likes).find(function(e){return t.likes[e]==a.user.id})),r.a.createElement("div",{className:"card card-body bg-light mb-3"},r.a.createElement("div",{className:"news-title"},r.a.createElement("a",{className:"news-link",href:t.link,target:"_blank",rel:"noopener noreferrer"},t.title),r.a.createElement("span",{className:"news-source ml-3"},"(",t.source,")")),r.a.createElement("div",{className:"news-info"},r.a.createElement("a",{href:"#",className:"news-like news-action",onClick:this.onLikeClick.bind(this,t.id,a.user.id,n,s)},r.a.createElement("i",{className:Y()("fas fa-thumbs-up",{"text-info":n})}),Object.keys(t.likes).length>0?r.a.createElement("span",{className:"badge badge-dark ml-2"},Object.keys(t.likes).length):null),r.a.createElement(i.b,{to:"/news/".concat(t.id,"/comments"),className:"news-comment news-action mx-5"},"Comment",t.comments>0?r.a.createElement("span",{className:"badge badge-dark ml-2"},t.comments):null),r.a.createElement("span",{className:"news-poster mr-3"},"Posted by (",t.user,") ",r.a.createElement(re.a,{fromNow:!0},t.updated_at)),t.user_id===a.user.id?r.a.createElement("span",{className:"actions float-right"},r.a.createElement(i.b,{className:"news-edit news-action mr-2",to:"/news/".concat(t.id,"/edit")},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("a",{href:"#",onClick:this.onDeleteClick.bind(this,t.id),className:"news-delete news-action"},r.a.createElement("i",{className:"fas fa-times"}))):null))}}]),t}(n.Component),ce=Object(l.b)(function(e){return{auth:e.auth}},{deleteNews:function(e){return function(t){p.a.delete("/api/news/".concat(e)).then(function(a){return t({type:"DELETE_NEWS",payload:e})}).catch(function(e){return t({type:b,payload:e.response.data})})}},addLike:se,removeLike:oe})(ie),le=function(e){function t(){return Object(A.a)(this,t),Object(I.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){this.props.getNewsList()}},{key:"render",value:function(){var e,t=this.props.newsList;return e=t&&t.length>0?t.map(function(e){return r.a.createElement(ce,{key:e.id,news:e})}):r.a.createElement("h4",null,"No news item yet!"),r.a.createElement("div",{className:"news-list row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h2",{className:"text-center"},"News listings"),e))}}]),t}(n.Component),ue=Object(l.b)(function(e){return{newsList:e.news.newsList}},{getNewsList:te})(le),me=function(e){var t=e.name,a=e.value,n=e.onChange,s=e.error;return r.a.createElement("div",{className:"hidden-input"},r.a.createElement("input",{type:"hidden",className:Y()("form-control form-control-lg",{"is-invalid":s}),name:t,value:a,onChange:n}))},de=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(I.a)(this,Object(M.a)(t).call(this,e))).state={user_id:e.user.id,title:"",link:"",source:"",errors:{},buttonTxt:"Add news"},a.onChange=a.onChange.bind(Object(G.a)(a)),a.onSubmit=a.onSubmit.bind(Object(G.a)(a)),a}return Object(X.a)(t,e),Object(W.a)(t,[{key:"onChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={user_id:this.state.user_id,title:this.state.title,source:this.state.source,link:this.state.link};if("edit"===this.props.action){var a=this.props.match.params.id;this.props.editNews(a,t,this.props.history)}else this.props.addNews(t,this.props.history)}},{key:"componentDidMount",value:function(){if("edit"===this.props.action){var e=this.props.match.params.id;this.props.getNews(e)}}},{key:"componentWillReceiveProps",value:function(e){if(e.errors&&this.setState({errors:e.errors}),e.news){var t=e.news;t.user_id=y(t.user_id)?"":t.user_id,t.title=y(t.title)?"":t.title,t.link=y(t.link)?"":t.link,t.source=y(t.source)?"":t.source,this.setState({user_id:t.user_id,title:t.title,source:t.source,link:t.link,buttonTxt:"Edit news"})}}},{key:"render",value:function(){var e=this.props.errors;return r.a.createElement("div",{className:"news-form"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(me,{name:"user_id",value:this.state.user_id,onChange:this.onChange,error:e.user_id}),r.a.createElement(H,{type:"text",id:"title",placeholder:"Enter Title",name:"title",value:this.state.title,onChange:this.onChange,error:e.title,label:"Title"}),r.a.createElement(H,{type:"text",id:"link",placeholder:"Enter Link",name:"link",value:this.state.link,onChange:this.onChange,error:e.link,label:"Link"}),r.a.createElement(H,{type:"text",id:"source",placeholder:"Enter Source",name:"source",value:this.state.source,onChange:this.onChange,error:e.source,label:"Source"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg"},this.state.buttonTxt)))}}]),t}(n.Component);de.defaultProps={action:"add"};var pe=Object(l.b)(function(e){return{errors:e.errors,user:e.auth.user,news:e.news.news}},{addNews:function(e,t){return function(a){p.a.post("/api/news",e).then(function(e){return t.push("/feeds")}).catch(function(e){return a({type:b,payload:e.response.data})})}},editNews:function(e,t,a){return function(n){p.a.put("/api/news/".concat(e),t).then(function(e){return a.push("/feeds")}).catch(function(e){return n({type:b,payload:e.response.data})})}},getNews:ae})(Object(c.g)(de)),he=function(e){function t(){return Object(A.a)(this,t),Object(I.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"add-news row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h2",{className:"text-center"},"Add News"),r.a.createElement(pe,null)))}}]),t}(n.Component),be=function(e){function t(){return Object(A.a)(this,t),Object(I.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"edit-news row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h2",{className:"text-center"},"Edit News"),r.a.createElement(pe,{action:"edit"})))}}]),t}(n.Component),fe=function(e){var t=e.name,a=e.placeholder,n=e.value,s=e.error,o=e.info,i=e.onChange;return r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",{className:Y()("form-control form-control-lg",{"is-invalid":s}),placeholder:a,name:t,value:n,onChange:i}),o&&r.a.createElement("small",{className:"form-text text-muted"},o),s&&r.a.createElement("div",{className:"invalid-feedback"},s))},ve=function(e){function t(){return Object(A.a)(this,t),Object(I.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(X.a)(t,e),Object(W.a)(t,[{key:"onDeleteClick",value:function(e,t){window.confirm("Are you sure you want to delete the comment")&&this.props.deleteComment(e,t)}},{key:"render",value:function(){var e=this.props,t=e.comment,a=e.currentUserId;return r.a.createElement("div",{className:"comment-item"},r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item mb-2"},r.a.createElement("span",{className:"comment-user"},t.user.username)," says:\xa0",r.a.createElement("span",{className:"comment-text"},t.comment),t.user_id===a?r.a.createElement("span",{className:"comment-actions float-right"},r.a.createElement("a",{href:"#",onClick:this.onDeleteClick.bind(this,t.news_id,t.id),className:"comment-delete news-action"},r.a.createElement("i",{className:"fas fa-times"}))):null)))}}]),t}(n.Component),we=Object(l.b)(null,{deleteComment:function(e,t){return function(a){p.a.delete("/api/news/".concat(e,"/comments/").concat(t)).then(function(e){return a({type:"DELETE_COMMENT",payload:t})}).catch(function(e){return a({type:b,payload:e.response.data})})}}})(ve),Ee=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(I.a)(this,Object(M.a)(t).call(this,e))).state={news_id:"",user_id:"",title:"",link:"",source:"",comment:"",comments:{},user:{},updated_at:"",errors:{},news:{}},a.onChange=a.onChange.bind(Object(G.a)(a)),a.onSubmit=a.onSubmit.bind(Object(G.a)(a)),a}return Object(X.a)(t,e),Object(W.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.getNews(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.news,a=e.errors,n=e.user;a&&this.setState({errors:a}),e.news&&this.setState({news_id:t.id,user_id:n.id,title:t.title,link:t.link,source:t.source,comments:t.comments,user:t.user,updated_at:t.updated_at,news:t})}},{key:"onChange",value:function(e){this.setState(Object(g.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={user_id:this.state.user_id,news_id:this.state.news_id,comment:this.state.comment};this.props.addComment(t),this.state.comment=""}},{key:"onLikeClick",value:function(e,t,a,n){a?this.props.removeLike(e,n,"show"):this.props.addLike(e,t,"show")}},{key:"findUserLike",value:function(e){var t=this.props.user;return!(!e||!Object.values(e).includes(t.id))}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.errors,s=a.user,o=this.state.comments,i=this.findUserLike(this.state.news.likes),c=0;return i&&(c=Object.keys(this.state.news.likes).find(function(e){return t.state.news.likes[e]==s.id})),e=o&&o.length>0?o.map(function(e){return r.a.createElement(we,{key:e.id,comment:e,currentUserId:s.id})}):r.a.createElement("h4",null,"No comments yet!"),r.a.createElement("div",{className:"card card-body bg-light my-3"},r.a.createElement("div",{className:"news-title"},r.a.createElement("a",{className:"news-link",href:this.state.link,target:"_blank",rel:"noopener noreferrer"},this.state.title),r.a.createElement("span",{className:"news-source ml-3"},"(",this.state.source,")")),r.a.createElement("div",{className:"news-info"},r.a.createElement("a",{href:"#",className:"news-like news-action",onClick:this.onLikeClick.bind(this,this.state.news_id,this.state.user_id,i,c)},r.a.createElement("i",{className:Y()("fas fa-thumbs-up",{"text-info":i})}),this.state.news.likes&&Object.values(this.state.news.likes).length>0?r.a.createElement("span",{className:"badge badge-dark ml-2"},Object.values(this.state.news.likes).length):null),r.a.createElement("span",{className:"news-comment news-action mx-5"},"Comment",this.state.comments.length>0?r.a.createElement("span",{className:"badge badge-dark ml-2"},this.state.comments.length):null),r.a.createElement("span",{className:"news-poster mr-3"},"Posted by (",this.state.user.username,") ",r.a.createElement(re.a,{fromNow:!0},this.state.updated_at))),r.a.createElement("hr",null),r.a.createElement("div",{className:"comment-box mt-3"},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(me,{name:"news_id",value:this.state.news_id,onChange:this.onChange,error:n.news_id}),r.a.createElement(me,{name:"user_id",value:this.state.user_id,onChange:this.onChange,error:n.user_id}),r.a.createElement(fe,{placeholder:"Give some comment",name:"comment",value:this.state.comment,onChange:this.onChange,error:n.comment,label:"Comment"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-sm float-right"},"Comment"))),r.a.createElement("hr",null),e)}}]),t}(n.Component),ge=Object(l.b)(function(e){return{user:e.auth.user,news:e.news.news,errors:e.errors}},{getNews:ae,addComment:function(e){return function(t){p.a.post("/api/news/".concat(e.news_id,"/comments"),e).then(function(e){return t({type:"SET_COMMENT",payload:e.data.data})}).catch(function(e){return t({type:b,payload:e.response.data})})}},addLike:se,removeLike:oe})(Ee);if(localStorage.jwtToken){h(localStorage.jwtToken);var ye=m()(localStorage.jwtToken);P.dispatch(v(ye));var ke=Date.now()/1e3;ye.exp<ke&&(P.dispatch(f()),window.location.href="/login")}var Oe=function(){return r.a.createElement(l.a,{store:P},r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(z,null),r.a.createElement("div",{className:"container page-wrapper"},r.a.createElement(c.b,{exact:!0,path:"/(|feeds)/",component:ue}),r.a.createElement(c.b,{exact:!0,path:"/login",component:Q}),r.a.createElement(c.b,{exact:!0,path:"/register",component:ee}),r.a.createElement(c.d,null,r.a.createElement(U,{exact:!0,path:"/news/create",component:he})),r.a.createElement(c.d,null,r.a.createElement(U,{exact:!0,path:"/news/:id/edit",component:be})),r.a.createElement(c.d,null,r.a.createElement(U,{exact:!0,path:"/news/:id/comments",component:ge}))),r.a.createElement(F,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.b65d6430.chunk.js.map